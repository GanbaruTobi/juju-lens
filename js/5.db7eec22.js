(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"29db":function(t,e,a){},"56c6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"models absolute fit flex items-stretch"},[a("div",{staticClass:"fit column"},[a("q-toolbar",{staticClass:"col-auto row q-mb-sm"},[a("q-tabs",{staticClass:"model-machine-tabs q-pa-xs",attrs:{"inline-label":"",shrink:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-route-tab",{attrs:{label:"Models",icon:"share",name:"models",to:{name:"models"}}}),a("q-route-tab",{attrs:{label:"Machines",icon:"fas fa-server",name:"machines",to:{name:"machines"}}})],1),a("q-space"),a("q-btn",{attrs:{color:"positive",icon:"fas fa-plus"},on:{click:function(e){return t.startCreate()}}})],1),a("q-scroll-area",{ref:"modelScrollArea",staticClass:"col-grow",attrs:{"thumb-style":{width:"5px"}}},[a("div",{staticClass:"q-pa-sm"},[a("div",{staticClass:"text-h5 q-mb-md xs"},[t._v("\n          Models\n        ")]),t._l(t.models,(function(e){return a("div",{key:e.id,staticClass:"q-mb-md full-width"},[a("q-toolbar",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-primary text-white full-width",on:{click:function(a){return t.$set(t.modelsExpanded,e.id,!t.modelsExpanded[e.id])}}},[a("q-icon",{style:{color:e.statusIcon.color},attrs:{name:e.statusIcon.icon,size:"1.7em"}}),a("q-toolbar-title",{staticStyle:{flex:"1 1 0%"}},[t._v("\n              "+t._s(e.name)+"\n            ")]),a("div",{staticClass:"avatar-stack"},t._l(e.applications,(function(e){return a("q-avatar",{key:e.id,attrs:{size:"2em"}},[a("q-img",{attrs:{src:e.charm.imageUrl}}),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle","content-style":"font-size: 0.8em;"}},[t._v("\n                  "+t._s(e.name)+"\n                ")])],1)})),1),a("q-btn",{staticStyle:{transition:"transform 0.2s"},style:{transform:t.modelsExpanded[e.id]?"rotateZ(180deg)":"none"},attrs:{round:"",dense:"",flat:"",icon:"arrow_downward"}}),a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"more_vert"},on:{click:function(t){t.stopPropagation()}}})],1),a("q-slide-transition",[t.modelsExpanded[e.id]?a("div",[a("q-tab-panels",{staticStyle:{"background-color":"hsla(0, 0%, 0%, 0)"},attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticClass:"q-pa-none",attrs:{id:"model-"+e.id,name:"models"}},[a("q-list",{attrs:{bordered:"",separator:""}},t._l(e.applications,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticClass:"row",attrs:{clickable:"",id:"application-"+e.id}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{style:{color:e.statusIcon.color},attrs:{name:e.statusIcon.icon,size:"1.7em"}})],1),a("q-item-section",{attrs:{avatar:""}},[a("q-img",{attrs:{src:e.charm.imageUrl}})],1),a("q-item-section",[a("div",[t._v("\n                          "+t._s(e.name)+"\n                        ")]),a("div",{staticClass:"row reverse"},t._l(e.units,(function(e){return a("div",{key:e.id},[a("q-icon",{staticClass:"q-ma-xs",style:{color:e.statusIcon.color},attrs:{name:e.statusIcon.icon,size:"1.em"}}),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle","content-style":"font-size: 0.8rem;"}},[t._v("\n                              "+t._s(e.status.message||"status: "+e.status.severity)+"\n                            ")])],1)})),0)]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"more_vert"},on:{click:function(t){t.stopPropagation()}}})],1)],1)})),1)],1),a("q-tab-panel",{attrs:{name:"machines"}},[a("div",{staticClass:"text-h5"},[t._v("Machine List Comming Soon!")])])],1)],1):t._e()])],1)}))],2)]),"models"==t.tab?a("div",{staticClass:"bg-dark text-white",staticStyle:{height:"2em"}},[a("q-bar",{attrs:{dense:""}},[a("img",{staticStyle:{height:"1em"},attrs:{src:"/statics/charmIcons/spark.svg",ratio:1}}),a("div",{staticClass:"text-weight-bold ellipsis"},[t._v("my-app")]),a("q-space"),a("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{dense:"",flat:"",icon:"fas fa-window-minimize"},on:{click:function(e){return t.$emit("minimize")}}},[a("q-tooltip",{attrs:{"transition-show":"jump-up","transition-hide":"jump-down",anchor:"top middle",self:"bottom middle",delay:300}},[t._v("\n            Hide\n          ")])],1)],1)],1):t._e()],1),a("juju-loading",{attrs:{loading:t.loading}})],1)},i=[],n=a("b7b1"),s=a("fb60");const r={icon:"fas fa-check-circle",color:"var(--q-color-positive)"},c={icon:"fas fa-exclamation-triangle",color:"var(--q-color-warning)"},l={icon:"fas fa-exclamation-circle",color:"var(--q-color-negative)"},d={icon:"fas fa-circle",color:"var(--q-color-positive)"},p={icon:"fas fa-circle",color:"var(--q-color-warning)"},m={icon:"fas fa-circle",color:"var(--q-color-negative)"};function u(t,e){const a=s["a"][t];return a>=s["a"].blocked?e?m:l:a>=s["a"].maintenance?e?p:c:e?d:r}var f=a("b2da"),h=a("60a3"),b=a("4bb5"),v=a("0831"),g=a("f303"),y=function(t,e,a,o){var i,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,a,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(n<3?i(s):n>3?i(e,a,s):i(e,a))||s);return n>3&&s&&Object.defineProperty(e,a,s),s},q=function(t,e,a,o){function i(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,n){function s(t){try{c(o.next(t))}catch(e){n(e)}}function r(t){try{c(o["throw"](t))}catch(e){n(e)}}function c(t){t.done?a(t.value):i(t.value).then(s,r)}c((o=o.apply(t,e||[])).next())}))};const w=Object(b["a"])("juju"),{offset:x}=g["c"],{setScrollPosition:S}=v["a"];let j=class extends h["d"]{constructor(){super(...arguments),this.loading=!1,this.tab="models",this.activeApplication=null,this.modelsExpanded={}}scrollToElement(t){const e=this.$refs.modelScrollArea,a=e.getScrollTarget(),o=e.getScrollPosition(),i=x(t).top,n=o+i-122;console.log(o,i,n);const s=100;S(a,n,s)}get models(){const t=[];for(const e of this.rawModels){const a=this.applications.filter(t=>t.modelId==e.id).map(t=>{const e=this.units.filter(e=>e.applicationId==t.id).map(t=>Object.assign({statusIcon:u(t.status.severity,!0)},t)),a=e.map(t=>t.status.severity).sort((t,e)=>s["a"][e]-s["a"][t])[0];return Object.assign({charm:this.charmStore.filter(e=>e.id==t.charmId)[0],units:e,statusIcon:u(a),severity:a},t)});t.push(Object.assign({applications:a,statusIcon:u(a.map(t=>t.severity).sort((t,e)=>s["a"][e]-s["a"][t])[0])},e))}return t}created(){return q(this,void 0,void 0,(function*(){yield this.fetchData(),this.scrollToApp()}))}fetchData(){return q(this,void 0,void 0,(function*(){this.loading=!0,yield this.loadAllState(),this.loading=!1}))}scrollToApp(){const t=this.$route.query.unitId;if(!t)return;const e=this.units.filter(e=>e.id==t)[0],a=this.applications.filter(t=>t.id==e.applicationId)[0];this.$set(this.modelsExpanded,a.modelId,!0),setTimeout(function t(){const e=document.getElementById("application-"+a.id);e?this.scrollToElement(e):setTimeout(t,100)}.bind(this),400)}};y([w.State],j.prototype,"currentController",void 0),y([w.State("models")],j.prototype,"rawModels",void 0),y([w.State("store")],j.prototype,"charmStore",void 0),y([w.State],j.prototype,"applications",void 0),y([w.State],j.prototype,"units",void 0),y([w.Action(f["a"].loadAllState)],j.prototype,"loadAllState",void 0),y([Object(h["e"])("$route")],j.prototype,"scrollToApp",null),j=y([Object(h["a"])({components:{JujuLoading:n["a"]}})],j);var T=j,_=T,C=(a("ca6e"),a("2877")),I=a("65c6"),Q=a("429b"),k=a("7867"),O=a("2c91"),L=a("9c40"),A=a("4983"),E=a("0016"),P=a("6ac5"),R=a("cb32"),z=a("068f"),$=a("05c0"),H=a("e9c1"),M=a("adad"),B=a("823b"),D=a("1c1c"),N=a("66e5"),J=a("4074"),U=a("d847"),Z=a("7460"),F=a("714f"),G=a("eebe"),K=a.n(G),V=Object(C["a"])(_,o,i,!1,null,null,null);e["default"]=V.exports;K()(V,"components",{QToolbar:I["a"],QTabs:Q["a"],QRouteTab:k["a"],QSpace:O["a"],QBtn:L["a"],QScrollArea:A["a"],QIcon:E["a"],QToolbarTitle:P["a"],QAvatar:R["a"],QImg:z["a"],QTooltip:$["a"],QSlideTransition:H["a"],QTabPanels:M["a"],QTabPanel:B["a"],QList:D["a"],QItem:N["a"],QItemSection:J["a"],QBar:U["a"],QTab:Z["a"]}),K()(V,"directives",{Ripple:F["a"]})},b7b1:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-inner-loading",{attrs:{showing:t.showLoading}},[a("q-spinner-rings",{attrs:{size:"80%",color:t.$q.dark.isActive?"secondary":"primary"}})],1)},i=[],n=a("74f7"),s=a("792f"),r=a("60a3"),c=function(t,e,a,o){var i,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,a,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(n<3?i(s):n>3?i(e,a,s):i(e,a))||s);return n>3&&s&&Object.defineProperty(e,a,s),s};let l=class extends r["d"]{constructor(){super(...arguments),this.showLoading=!1,this.showLoadingTimeoutHandle=null}created(){this.onLoadingChange(this.loading)}onLoadingChange(t){t||(this.showLoading=!1),!t&&this.showLoadingTimeoutHandle?clearTimeout(this.showLoadingTimeoutHandle):t&&!this.showLoadingTimeoutHandle&&(this.showLoadingTimeoutHandle=setTimeout(()=>this.showLoading=!0,this.delay))}};c([Object(r["c"])(Boolean)],l.prototype,"loading",void 0),c([Object(r["c"])({type:Number,default:300})],l.prototype,"delay",void 0),c([Object(r["e"])("loading")],l.prototype,"onLoadingChange",null),l=c([Object(r["a"])({components:{QInnerLoading:n["a"],QSpinnerRings:s["a"]}})],l);var d=l,p=d,m=a("2877"),u=a("eebe"),f=a.n(u),h=Object(m["a"])(p,o,i,!1,null,null,null);e["a"]=h.exports;f()(h,"components",{QInnerLoading:n["a"],QSpinnerRings:s["a"]})},ca6e:function(t,e,a){"use strict";var o=a("29db"),i=a.n(o);i.a}}]);