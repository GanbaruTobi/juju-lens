(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{1396:function(t,e,o){},a7d4:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"controllers absolute fit flex items-stretch"},[o("div",{staticClass:"q-pa-xs fit column"},[o("q-toolbar",{staticClass:"col-auto row"},[o("q-tabs",{staticClass:"q-pa-xs ctrlr-cred-tabs",attrs:{"inline-label":"",shrink:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("q-tab",{attrs:{label:"Controllers",icon:"fas fa-server",name:"controllers"}}),o("q-tab",{attrs:{label:"Cloud Credentials",icon:"fas fa-address-card",name:"credentials"}})],1),o("q-space"),o("q-btn",{attrs:{color:"positive",icon:"fas fa-plus"},on:{click:function(e){return t.startCreate()}}})],1),o("q-tab-panels",{staticStyle:{flex:"1 1 0%","background-color":"hsla(0, 0%, 0%, 0)"},attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("q-tab-panel",{staticClass:"row content-start q-col-gutter-sm",attrs:{name:"controllers","transition-next":"tab-trans","transition-prev":"tab-trans"}},[o("div",{staticClass:"text-h5 ctrl-cred-tabs-alt-heading col-12 q-mb-sm q-ml-xs"},[t._v("\n          Controllers\n        ")]),t._l(t.controllers,(function(e){return o("div",{key:e.name,staticClass:"col-12 col-sm-6 col-md-4"},[o("q-card",[o("q-card-section",[o("div",{staticClass:"row items-center"},[o("div",{staticClass:"col-grow",staticStyle:{flex:"1 1 0%"}},[o("div",{staticClass:"text-h6 ellipsis"},[o("q-icon",{staticClass:"on-left",attrs:{name:"fas fa-server"}}),t._v("\n                    "+t._s(e.name)+"\n                  ")],1),o("div",{staticClass:"text-subtitle2 row"},[o("div",{staticClass:"q-mr-sm"},[o("q-icon",{staticClass:"q-ma-xs",attrs:{name:"cloud",size:"1em"}}),t._v("\n                      "+t._s(t.controllersCloud(e))+"\n                    ")],1),t.cloudCredentials?o("div",{staticClass:"q-mr-sm"},[o("q-icon",{staticClass:"q-ma-xs",attrs:{name:"fas fa-address-card",size:"1em"}}),t._v("\n                      "+t._s(t.controllersCredential(e))+"\n                    ")],1):t._e(),o("div",{staticClass:"q-mr-sm"},[o("q-icon",{staticClass:"q-ma-xs",attrs:{name:"person",size:"1em"}}),t._v("\n                      "+t._s(e.accessLevel)+"\n                    ")],1)])]),o("div",{staticClass:"col-auto"},[o("q-btn",{attrs:{flat:"",round:"",icon:"more_vert"}},[o("q-menu",{staticStyle:{"font-size":"1em"},attrs:{anchor:"center right",self:"center left",offset:[10,0]}},[o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{clickable:""},on:{click:function(o){return t.startEditController(e)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"edit"}})],1),o("q-item-section",[t._v("Edit")])],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-negative text-white",attrs:{clickable:""},on:{click:function(o){return t.deleteController(e)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"delete"}})],1),o("q-item-section",[t._v("Delete")])],1)],1)],1)],1)])]),o("q-separator"),o("q-card-section"),o("juju-loading",{attrs:{loading:t.loadingControllers[e.id]}})],1)],1)}))],2),o("q-tab-panel",{staticClass:"row content-start q-col-gutter-sm",attrs:{name:"credentials"}},[o("div",{staticClass:"text-h5 ctrl-cred-tabs-alt-heading col-12 q-mb-sm q-ml-xs"},[t._v("\n          Cloud Credentials\n        ")]),t._l(t.cloudCredentials,(function(e){return o("div",{key:e.name,staticClass:"col-12 col-sm-6 col-md-4"},[o("q-card",[o("q-card-section",[o("div",{staticClass:"row items-center"},[o("div",{staticClass:"col-grow",staticStyle:{flex:"1 1 0%"}},[o("div",{staticClass:"text-h6 ellipsis"},[o("q-icon",{staticClass:"on-left",attrs:{name:"fas fa-address-card"}}),t._v("\n                    "+t._s(e.name)+"\n                  ")],1),o("div",{staticClass:"text-subtitle2 row"},[o("div",{staticClass:"q-mr-sm"},[o("q-icon",{staticClass:"q-ma-xs",attrs:{name:"cloud",size:"1em"}}),t._v("\n                      "+t._s(t.credentialsCloud(e))+"\n                    ")],1)])]),o("div",{staticClass:"col-auto"},[o("q-btn",{attrs:{flat:"",round:"",icon:"more_vert"}},[o("q-menu",{staticStyle:{"font-size":"1em"},attrs:{anchor:"center right",self:"center left",offset:[10,0]}},[o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{clickable:""}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"edit"}})],1),o("q-item-section",[t._v("Edit")])],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-negative text-white",attrs:{clickable:""},on:{click:function(o){return t.deleteCredential(e)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"delete"}})],1),o("q-item-section",[t._v("Delete")])],1)],1)],1)],1)])]),o("juju-loading",{attrs:{loading:t.loadingCredentials[e.id]}})],1)],1)}))],2)],1)],1),o("juju-loading",{attrs:{loading:t.loading}})],1)},i=[],l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-inner-loading",{attrs:{showing:t.showLoading}},[o("q-spinner-rings",{attrs:{size:"80%",color:t.$q.dark.isActive?"secondary":"primary"}})],1)},s=[],n=o("fe09"),r=o("60a3"),c=function(t,e,o,a){var i,l=arguments.length,s=l<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,o,a);else for(var n=t.length-1;n>=0;n--)(i=t[n])&&(s=(l<3?i(s):l>3?i(e,o,s):i(e,o))||s);return l>3&&s&&Object.defineProperty(e,o,s),s};let d=class extends r["d"]{constructor(){super(...arguments),this.showLoading=!1,this.showLoadingTimeoutHandle=null}created(){this.onLoadingChange(this.loading)}onLoadingChange(t){t||(this.showLoading=!1),!t&&this.showLoadingTimeoutHandle?clearTimeout(this.showLoadingTimeoutHandle):t&&!this.showLoadingTimeoutHandle&&(this.showLoadingTimeoutHandle=setTimeout(()=>this.showLoading=!0,this.delay))}};c([Object(r["c"])(Boolean)],d.prototype,"loading",void 0),c([Object(r["c"])({type:Number,default:300})],d.prototype,"delay",void 0),c([Object(r["e"])("loading")],d.prototype,"onLoadingChange",null),d=c([Object(r["a"])({components:{QInnerLoading:n["b"],QSpinnerRings:n["c"]}})],d);var u=d,p=u,m=o("2877"),h=o("eebe"),C=o.n(h),f=o("74f7"),g=o("792f"),b=Object(m["a"])(p,l,s,!1,null,null,null),v=b.exports;C()(b,"components",{QInnerLoading:f["a"],QSpinnerRings:g["a"]});var q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[o("q-card",{staticClass:"q-dialog-plugin"},[o("q-card-section",[o("div",{staticClass:"text-h5 q-mb-sm flex items-center"},[t.editing?o("q-icon",{staticClass:"on-left",attrs:{name:"edit"}}):t._e(),t.editing?o("span",[t._v("Edit")]):t._e(),t.editing?t._e():o("q-icon",{staticClass:"on-left",attrs:{name:"fas fa-plus"}}),t.editing?t._e():o("span",[t._v("Create")]),o("span",[t._v("Â Controller")])],1),t.editing?t._e():o("p",[t._v("Deploy a new controller to a supported cloud.")]),o("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[o("q-input",{attrs:{label:"Controller name",color:t.inputColor,rules:[function(t){return!!t||"Field is required"}]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),o("div",{staticClass:"row"},[o("q-select",{staticClass:"col q-pr-xs",attrs:{label:"Cloud","option-label":"name",options:t.clouds,color:t.inputColor,disable:t.editing,rules:[function(t){return!!t||"Field is required"}]},model:{value:t.cloud,callback:function(e){t.cloud=e},expression:"cloud"}}),o("q-select",{staticClass:"col",attrs:{label:"Region","option-label":"name",disable:!t.cloud||t.editing,options:t.cloud?t.cloud.availableRegions:[],color:t.inputColor,rules:[function(t){return!!t||"Field is required"}]},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}})],1),o("q-select",{attrs:{label:"Cloud Credential","option-label":"name",disable:!t.cloud||t.editing,options:t.cloud?t.cloudCredentials.filter((function(e){return e.cloudId==t.cloud.id})):[],color:t.inputColor,rules:[function(t){return!!t||"Field is required"}]},model:{value:t.cloudCredential,callback:function(e){t.cloudCredential=e},expression:"cloudCredential"}}),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{attrs:{color:"positive",type:"submit",label:t.controller?"Update":"Create",icon:t.editing?"check":"fas fa-plus",loading:t.loading}}),o("q-btn",{attrs:{color:"primary",icon:"cancel",label:"Cancel"},on:{click:t.onCancelClick}})],1)],1)],1)],1)],1)},y=[],w=o("cf2e"),x=o("b2da"),_=o("4bb5"),j=function(t,e,o,a){var i,l=arguments.length,s=l<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,o,a);else for(var n=t.length-1;n>=0;n--)(i=t[n])&&(s=(l<3?i(s):l>3?i(e,o,s):i(e,o))||s);return l>3&&s&&Object.defineProperty(e,o,s),s};const k=Object(_["a"])("juju");let Q=class extends r["d"]{constructor(){super(...arguments),this.loading=!1,this.name=null,this.cloud=null,this.region=null,this.cloudCredential=null}get inputColor(){return this.$q.dark.isActive?"secondary":"primary"}get editing(){return null!=this.controller}show(){this.controller&&(this.name=this.controller.name,this.cloud=this.clouds.filter(t=>t.id==this.controller.cloudId)[0],this.region=this.controller.region,this.cloudCredential=this.cloudCredentials.filter(t=>t.id==this.controller.cloudCredentialId)[0]),this.$refs.dialog.show()}hide(){this.$refs.dialog.hide()}onDialogHide(){this.$emit("hide")}onSubmit(){if(this.editing){const t={name:this.name,id:this.controller.id,cloudId:this.cloud.id,accessLevel:this.controller.accessLevel,region:this.region,cloudCredentialId:this.cloudCredential.id};this.loading=!0,this.updateController(t).then(()=>{this.$emit("ok",t),this.hide(),this.loading=!1})}else{const t={name:this.name,id:Object(n["e"])(),cloudId:this.cloud.id,accessLevel:"admin",region:this.region,cloudCredentialId:this.cloudCredential.id};this.loading=!0,this.addController(t).then(()=>{this.$emit("ok",t),this.hide(),this.loading=!1,this.setCurrentController(t)})}}onCancelClick(){this.hide()}};j([Object(r["c"])({type:Object,default:null})],Q.prototype,"controller",void 0),j([k.State],Q.prototype,"clouds",void 0),j([k.State],Q.prototype,"cloudCredentials",void 0),j([k.Mutation(w["b"].setCurrentController)],Q.prototype,"setCurrentController",void 0),j([k.Action(x["a"].addController)],Q.prototype,"addController",void 0),j([k.Action(x["a"].updateController)],Q.prototype,"updateController",void 0),Q=j([r["a"]],Q);var O=Q,$=O,L=o("24e8"),S=o("f09f"),I=o("a370"),D=o("0016"),A=o("0378"),R=o("27f9"),T=o("ddd8"),P=o("4b7e"),E=o("9c40"),z=Object(m["a"])($,q,y,!1,null,null,null),H=z.exports;C()(z,"components",{QDialog:L["a"],QCard:S["a"],QCardSection:I["a"],QIcon:D["a"],QForm:A["a"],QInput:R["a"],QSelect:T["a"],QCardActions:P["a"],QBtn:E["a"]});var F=function(t,e,o,a){var i,l=arguments.length,s=l<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,o,a);else for(var n=t.length-1;n>=0;n--)(i=t[n])&&(s=(l<3?i(s):l>3?i(e,o,s):i(e,o))||s);return l>3&&s&&Object.defineProperty(e,o,s),s};const N=Object(_["a"])("juju");let B=class extends r["d"]{constructor(){super(...arguments),this.tab="controllers",this.loading=!1,this.loadingControllers={},this.loadingCredentials={}}created(){this.fetchData()}fetchData(){this.loading=!0,Promise.all([this.loadControllers(),this.loadCloudCredentials(),this.loadCloudList()]).then(()=>{this.loading=!1})}startCreate(){"controllers"==this.tab&&this.$q.dialog({component:H,parent:this})}startEditController(t){this.$q.dialog({component:H,parent:this,controller:t})}deleteController(t){this.$q.dialog({title:"Are you sure?",message:`Are you sure you want to delete controller ${t.name}?`,persistent:!0,cancel:!0,ok:{label:"delete",color:"negative"}}).onOk(()=>{this.$set(this.loadingControllers,t.id,!0),this.runDeleteController(t.id).then(()=>{this.$set(this.loadingControllers,t.id,!1),this.$q.notify({type:"positive",message:`Seccessfully deleted controller: ${t.name}.`,position:"bottom-right",timeout:2e3})})})}deleteCredential(t){this.$q.dialog({title:"Are you sure?",message:`Are you sure you want to delete credential ${t.name}?`,persistent:!0,cancel:!0,ok:{label:"delete",color:"negative"}}).onOk(()=>{this.$set(this.loadingCredentials,t.id,!0),this.runDeleteCredential(t.id).then(()=>{this.$set(this.loadingCredentials,t.id,!1),this.$q.notify({type:"positive",message:`Seccessfully deleted credential: ${t.name}.`,position:"bottom-right",timeout:2e3})})})}credentialsCloud(t){const e=this.clouds.filter(e=>e.id==t.cloudId);return e[0]?e[0].name:""}controllersCredential(t){const e=this.cloudCredentials.filter(e=>e.id==t.cloudCredentialId);return e[0]?e[0].name:""}controllersCloud(t){const e=this.clouds.filter(e=>e.id==t.cloudId);return e[0]?e[0].name:""}};F([N.State],B.prototype,"controllers",void 0),F([N.State],B.prototype,"cloudCredentials",void 0),F([N.State],B.prototype,"clouds",void 0),F([N.Action(x["a"].loadControllers)],B.prototype,"loadControllers",void 0),F([N.Action(x["a"].loadCloudCredentials)],B.prototype,"loadCloudCredentials",void 0),F([N.Action(x["a"].loadCloudList)],B.prototype,"loadCloudList",void 0),F([N.Action(x["a"].deleteController)],B.prototype,"runDeleteController",void 0),F([N.Action(x["a"].deleteCloudCredential)],B.prototype,"runDeleteCredential",void 0),B=F([Object(r["a"])({components:{JujuLoading:v}})],B);var J=B,M=J,U=(o("fb71"),o("65c6")),G=o("429b"),K=o("7460"),V=o("2c91"),W=o("adad"),X=o("823b"),Y=o("4e73"),Z=o("66e5"),tt=o("4074"),et=o("eb85"),ot=o("7f67"),at=Object(m["a"])(M,a,i,!1,null,null,null);e["default"]=at.exports;C()(at,"components",{QToolbar:U["a"],QTabs:G["a"],QTab:K["a"],QSpace:V["a"],QBtn:E["a"],QTabPanels:W["a"],QTabPanel:X["a"],QCard:S["a"],QCardSection:I["a"],QIcon:D["a"],QMenu:Y["a"],QItem:Z["a"],QItemSection:tt["a"],QSeparator:et["a"]}),C()(at,"directives",{ClosePopup:ot["a"]})},fb71:function(t,e,o){"use strict";var a=o("1396"),i=o.n(a);i.a}}]);