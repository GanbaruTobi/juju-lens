(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("2f39")},"2f39":function(e,t,n){"use strict";n.r(t);var o=n("967e"),r=n.n(o),a=(n("a481"),n("96cf"),n("fa84")),l=n.n(a),i=(n("573e"),n("7d6e"),n("e54f"),n("62f2"),n("7e6d"),n("2b0e")),s=n("1f91"),c=n("42d2"),u=n("b05d"),d=n("436b"),m=n("18d6"),f=n("2a19");i.a.use(u.a,{config:{dark:"auto",notify:{position:"top-right"}},lang:s.a,iconSet:c.a,plugins:{Dialog:d.a,LocalStorage:m.a,Notify:f.a}});var p=n("60a3"),b=n("b2da"),h=n("4bb5"),g=function(e,t,n,o){var r,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(a<3?r(l):a>3?r(t,n,l):r(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},w=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function l(e){try{s(o.next(e))}catch(e){a(e)}}function i(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((o=o.apply(e,t||[])).next())}))};const v=Object(h.a)("juju");let C=class App extends p.d{created(){return w(this,void 0,void 0,(function*(){const e=this.$q.localStorage.getItem("darkMode");null==e||"boolean"!=typeof e&&"auto"!=e||this.$q.dark.set(e),yield this.loadControllers()}))}};g([v.Action(b.a.loadControllers)],C.prototype,"loadControllers",void 0),C=g([p.a],C);var W=C,j=n("2877"),x=Object(j.a)(W,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"q-app"}},[t("router-view")],1)}),[],!1,null,null,null).exports,k=n("4bde"),y=n("2f62"),F=n("b444"),O=n("6260");var I={},z=n("f319");var P={namespaced:!0,actions:O.b,getters:I,mutations:z.a,state:F.b},q=n("fb60"),S=n("aaf8");function V(e,t){const n={};for(const o in t){const r=t[o];for(const t in r[e]){const o=r[e][t];n[t]=o}}return n}function D(e){return"All"!=e.currentController?e.controllers[e.currentController]:{models:V("models",e.controllers),units:V("units",e.controllers),applications:V("applications",e.controllers),charms:V("charms",e.controllers),machines:V("machines",e.controllers)}}var $={["currentControllerData"]:e=>D(e),["currentControllerModelsFilled"](e){const t=D(e),n=[];for(const e in t.models)n.push(Object(S.a)(t,e));return n}},A=n("cf2e");var H={namespaced:!0,actions:b.b,getters:$,mutations:A.a,state:q.b},M=Object(k.store)((function({Vue:e}){e.use(y.a);return new y.a.Store({modules:{app:P,juju:H},strict:!1})})),T=n("8c4f");const J=[{path:"/",component:()=>Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"713b")),children:[{path:"",name:"home",redirect:"/models"},{path:"/controllers",component:()=>Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"a7d4")),children:[{path:"",name:"controllers"},{path:"cloud-credentials",name:"cloud-credentials"}]},{path:"/models",component:()=>Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"56c6")),children:[{path:"",name:"models"},{path:"machines",name:"machines"}]},{path:"/my-account",name:"my-account",component:()=>Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"8c2d"))},{path:"/admin",name:"admin",component:()=>Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"34ab"))},{path:"/welcome",name:"welcome",component:()=>Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"35a8"))}]}];J.push({path:"*",component:()=>Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"e51e"))});var R=J,E=Object(k.route)((function({Vue:e}){e.use(T.a);const t=new T.a({scrollBehavior:()=>({x:0,y:0}),routes:R,mode:"hash",base:"/juju-lens/"});return t.beforeEach((e,t,n)=>{if(m.a.getItem("seen-juju-lens-before")||"welcome"==e.name)n();else{n({name:"welcome",query:Object.assign({welcomePageTo:e.fullPath},e.query)});try{m.a.set("seen-juju-lens-before","true")}catch(e){console.error(e)}}}),t})),L=function(){return U.apply(this,arguments)};function U(){return(U=l()(r.a.mark((function e(){var t,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof M){e.next=6;break}return e.next=3,M({Vue:i.a});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=M;case 7:if(t=e.t0,"function"!=typeof E){e.next=14;break}return e.next=11,E({Vue:i.a,store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=E;case 15:return n=e.t1,t.$router=n,(o={router:n,store:t,render:function(e){return e(x)}}).el="#q-app",e.abrupt("return",{app:o,store:t,router:n});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=n("bc3a"),B=n.n(_),N=Object(k.boot)(({Vue:e})=>{e.prototype.$axios=B.a});function Q(){return(Q=l()(r.a.mark((function e(){var t,n,o,a,l,s,c,u,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,n=t.app,o=t.store,a=t.router,l=!0,s=function(e){l=!1,window.location.href=e},c=window.location.href.replace(window.location.origin,""),u=[N],d=0;case 11:if(!(!0===l&&d<u.length)){e.next=29;break}if("function"==typeof u[d]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,u[d]({app:n,router:a,store:o,Vue:i.a,ssrContext:null,redirect:s,urlPath:c});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e.catch(14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:d++,e.next=11;break;case 29:if(!1!==l){e.next=31;break}return e.abrupt("return");case 31:new i.a(n);case 32:case"end":return e.stop()}}),e,null,[[14,19]])})))).apply(this,arguments)}!function(){Q.apply(this,arguments)}()},6260:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("2b0e"),r=n("b444"),a=n("f319"),l=n("1732");const i={addFloatingWindow:"addFloatingWindow",removeFloatingWindow:"removeFloatingWindow"},s={[i.addFloatingWindow](e,{unit:t,app:n,kind:i}){const s=Object(l.a)(),c={id:s,unit:t,app:n,visible:!1,maximized:!1,zIndex:0,kind:r.a[i]};return e.commit(a.b.addFloatingWindow,c),o.a.nextTick(()=>{e.commit(a.b.toggleFloatingWindowVisible,c.id)}),s},[i.removeFloatingWindow](e,t){e.commit(a.b.hideFloatingWindow,t),o.a.nextTick(()=>{setTimeout(()=>{e.commit(a.b.removeFloatingWindow,t)},400)})}};t.b=s},"7e6d":function(e,t,n){},aaf8:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return p}));var o=n("fb60");function r(e,t,n){return e+"/"+t+"/"+n}const a={icon:"fas fa-check-circle",color:"var(--q-color-positive)"},l={icon:"fas fa-exclamation-triangle",color:"var(--q-color-warning)"},i={icon:"fas fa-exclamation-circle",color:"var(--q-color-negative)"},s={icon:"fas fa-circle",color:"var(--q-color-positive)"},c={icon:"fas fa-circle",color:"var(--q-color-warning)"},u={icon:"fas fa-circle",color:"var(--q-color-negative)"};function d(e,t){const n=o.a[e];return n>=o.a.blocked?t?u:i:n>=o.a.maintenance?t?c:l:t?s:a}function m(e){return Object.assign({statusIcon:d(e["workload-status"].current,!0)},e)}function f(e,t){const n=e.applications[t];let r=[];for(const t in e.units){const a=e.units[t];a.name.startsWith(n.name)&&a["model-uuid"]==n["model-uuid"]&&r.push(m(a)),r=r.sort((e,t)=>o.a[t["workload-status"].current]-o.a[e["workload-status"].current])}const a=r.map(e=>e["workload-status"].current)[0];return Object.assign({charmIconUrl:(l=n["charm-url"],l.replace("cs:","https://api.jujucharms.com/charmstore/v5/")+"/icon.svg"),units:r,statusIcon:d(a),statusSeverity:a||"active"},n);var l}function p(e,t){const n=e.models[t];let r=[];for(const t in e.applications){e.applications[t]["model-uuid"]==n["model-uuid"]&&r.push(f(e,t)),r=r.sort((e,t)=>o.a[t.statusSeverity]-o.a[e.statusSeverity])}const a=r.map(e=>e.statusSeverity)[0];return Object.assign({statusSeverity:a||"active",statusIcon:d(a),applications:r},n)}},b2da:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n("cf2e"),r=n("18d6"),a=n("3b3d"),l=n.n(a),i=n("9927"),s=n.n(i),c=n("24f0"),u=n.n(c);const d={loadControllers:"loadControllers",setCurrentController:"setCurrentController",updateController:"updateController",deleteController:"deleteController",establishControllerConn:"establishControllerConn"};function m(e){const t={};for(const n in e.controllers)t[n]={applications:{},charms:{},machines:{},models:{},units:{},username:e.controllers[n].username,password:e.controllers[n].password,host:e.controllers[n].host,port:e.controllers[n].port};const n={currentController:e.currentController,controllers:t};r.a.set("jujuState",n)}const f={[d.setCurrentController](e,t){e.commit(o.b.setCurrentController,t),m(e.state)},[d.loadControllers](e){const t=r.a.getItem("jujuState");if(t){e.commit(o.b.setCurrentController,t.currentController);for(const n in t.controllers)e.dispatch(d.updateController,{name:n,controller:t.controllers[n]})}},[d.updateController](e,{name:t,controller:n}){const r=e.state.controllers[t];r&&r.controllerWatchHandle&&r.controllerWatchHandle.stop(e=>{e&&console.error(e)}),e.commit(o.b.updateController,{name:t,controller:n}),m(e.state),n.conn||n.controllerWatchHandle||e.dispatch(d.establishControllerConn,t)},[d.establishControllerConn](e,t){const n=e.state.controllers[t];if(!n)return;const r={debug:!1,facades:[s.a,u.a],wsclass:WebSocket};l.a.connectAndLogin(`wss://${n.host}:${n.port}/api`,{user:"admin"==n.username?"user-admin":n.username,password:n.password},r,(r,a)=>{if(r)return console.error(r),void setTimeout(()=>{e.dispatch(d.establishControllerConn,t)},1e3);const l=a.conn.facades.controller,i=l.watch((n,r)=>{if(n)console.log(n);else for(const n of r.deltas)e.commit(o.b.updateControllerData,{name:t,data:n})});n.conn=l,n.controllerWatchHandle=i,e.commit(o.b.updateController,{name:t,controller:n})})},[d.deleteController](e,t){const n=e.state.controllers[t];console.log,n&&n.conn&&n.controllerWatchHandle&&n.controllerWatchHandle.stop(e=>{e&&console.error(e)}),e.commit(o.b.deleteController,t),m(e.state)}};t.b=f},b444:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e[e.log=0]="log",e[e.terminal=1]="terminal"}(o||(o={}));t.b={debugWindow:{visible:!1,maximized:!1},floatingWindows:[]}},cf2e:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var o=n("2b0e"),r=n("aaf8");const a={setCurrentController:"setCurrentController",setControllers:"setControllers",updateController:"updateController",deleteController:"deleteController",updateControllerData:"updateControllerData"},l={[a.setCurrentController](e,t){e.currentController=t},[a.setControllers](e,t){e.controllers=t},[a.updateController](e,{name:t,controller:n}){o.a.set(e.controllers,t,n)},[a.deleteController](e,t){o.a.delete(e.controllers,t),e.currentController==t&&(e.currentController="All")},[a.updateControllerData](e,{name:t,data:[n,a,l]}){if("model"==n){const n=l,i=Object(r.b)(t,n["model-uuid"],n.name);"change"==a?o.a.set(e.controllers[t].models,i,Object.assign({lensId:i},n)):"remove"==a&&o.a.delete(e.controllers[t].models,i)}else if("application"==n){const n=l,i=Object(r.b)(t,n["model-uuid"],n.name);"change"==a?o.a.set(e.controllers[t].applications,i,Object.assign({lensId:i},n)):"remove"==a&&o.a.delete(e.controllers[t].applications,i)}else if("unit"==n){const n=l,i=Object(r.b)(t,n["model-uuid"],n.name);"change"==a?o.a.set(e.controllers[t].units,i,Object.assign({lensId:i},n)):"remove"==a&&o.a.delete(e.controllers[t].units,i)}else if("machine"==n){const n=l,i=Object(r.b)(t,n["model-uuid"],n.id);"change"==a?o.a.set(e.controllers[t].machines,i,Object.assign({lensId:i},n)):"remove"==a&&o.a.delete(e.controllers[t].machines,i)}else if("charm"==n){const n=l,i=Object(r.b)(t,n["model-uuid"],n["charm-url"]);"change"==a?o.a.set(e.controllers[t].charms,i,Object.assign({lensId:i},n)):"remove"==a&&o.a.delete(e.controllers[t].charms,i)}else console.warn("Unidentified resource type from Juju controller changefeed: "+n)}};t.a=l},f319:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));const o={addFloatingWindow:"addFloatingWindow",toggleFloatingWindowMaximized:"toggleFloatingWindowMaximized",toggleFloatingWindowVisible:"toggleFloatingWindowVisible",hideFloatingWindow:"hideFloatingWindow",focusFloatingWindow:"focusFloatingWindow",removeFloatingWindow:"removeFloatingWindow"};function r(e,t){e.floatingWindows.map(e=>{e.id==t?e.zIndex=1:e.zIndex=0})}const a={toggleDebugWindow(e){e.debugWindow.visible=!e.debugWindow.visible},toggleDebugWindowMaximized(e){e.debugWindow.maximized=!e.debugWindow.maximized},[o.addFloatingWindow](e,t){e.floatingWindows.push(t)},[o.toggleFloatingWindowMaximized](e,t){e.floatingWindows.map(e=>{e.id==t&&(e.maximized=!e.maximized)})},[o.toggleFloatingWindowVisible](e,t){let n=!1;e.floatingWindows.map(e=>{e.id==t&&(e.visible=!e.visible,n=e.visible)}),n&&r(e,t)},[o.hideFloatingWindow](e,t){e.floatingWindows.map(e=>{e.id==t&&(e.visible=!1)})},[o.focusFloatingWindow](e,t){r(e,t)},[o.removeFloatingWindow](e,t){e.floatingWindows=e.floatingWindows.filter(e=>e.id!=t)}};t.a=a},fb60:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e[e.active=0]="active",e[e.started=1]="started",e[e.maintenance=2]="maintenance",e[e.unknown=3]="unknown",e[e.waiting=4]="waiting",e[e.blocked=5]="blocked",e[e.error=6]="error",e[e.terminated=7]="terminated"}(o||(o={}));t.b={currentController:"All",controllers:{}}}},[[0,2,0]]]);