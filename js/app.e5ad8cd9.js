(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{0:function(e,t,n){e.exports=n("2f39")},"2f39":function(e,t,n){"use strict";n.r(t);var o=n("967e"),r=n.n(o),a=(n("a481"),n("96cf"),n("fa84")),l=n.n(a),i=(n("573e"),n("7d6e"),n("e54f"),n("62f2"),n("7e6d"),n("2b0e")),c=n("1f91"),s=n("42d2"),u=n("b05d"),d=n("436b"),m=n("18d6"),f=n("2a19");i["a"].use(u["a"],{config:{dark:"auto",notify:{position:"top-right"}},lang:c["a"],iconSet:s["a"],plugins:{Dialog:d["a"],LocalStorage:m["a"],Notify:f["a"]}});var p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},b=[],h=n("60a3"),g=n("b2da"),w=n("4bb5"),v=function(e,t,n,o){var r,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(a<3?r(l):a>3?r(t,n,l):r(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l},C=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function l(e){try{c(o.next(e))}catch(t){a(t)}}function i(e){try{c(o["throw"](e))}catch(t){a(t)}}function c(e){e.done?n(e.value):r(e.value).then(l,i)}c((o=o.apply(e,t||[])).next())}))};const W=Object(w["a"])("juju");let x=class extends h["d"]{created(){return C(this,void 0,void 0,(function*(){const e=this.$q.localStorage.getItem("darkMode");null==e||"boolean"!=typeof e&&"auto"!=e||this.$q.dark.set(e),yield this.loadControllers()}))}};v([W.Action(g["a"].loadControllers)],x.prototype,"loadControllers",void 0),x=v([h["a"]],x);var j=x,k=j,y=n("2877"),F=Object(y["a"])(k,p,b,!1,null,null,null),O=F.exports,I=n("4bde"),z=n("2f62"),P=n("b444"),q=n("6260");const D={};var S=D,V=n("f319");const M={namespaced:!0,actions:q["b"],getters:S,mutations:V["a"],state:P["b"]};var $=M,H=n("fb60"),A=n("aaf8");const T={currentControllerData:"currentControllerData",currentControllerModelsFilled:"currentControllerModelsFilled"};function J(e,t){const n={};for(const o in t){const r=t[o];for(const t in r[e]){const o=r[e][t];n[t]=o}}return n}function R(e){return"All"!=e.currentController?e.controllers[e.currentController]:{models:J("models",e.controllers),units:J("units",e.controllers),applications:J("applications",e.controllers),charms:J("charms",e.controllers),machines:J("machines",e.controllers)}}const E={[T.currentControllerData](e){return R(e)},[T.currentControllerModelsFilled](e){const t=R(e),n=[];for(const o in t.models)n.push(Object(A["a"])(t,o));return n}};var L=E,U=n("cf2e");const _={namespaced:!0,actions:g["b"],getters:L,mutations:U["a"],state:H["b"]};var B=_,N=Object(I["store"])((function({Vue:e}){e.use(z["a"]);const t=new z["a"].Store({modules:{app:$,juju:B},strict:!1});return t})),Q=n("8c4f");const G=[{path:"/",component:()=>Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"713b")),children:[{path:"",name:"home",redirect:"/models"},{path:"/controllers",component:()=>Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"a7d4")),children:[{path:"",name:"controllers"},{path:"cloud-credentials",name:"cloud-credentials"}]},{path:"/models",component:()=>Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"56c6")),children:[{path:"",name:"models"},{path:"machines",name:"machines"}]},{path:"/my-account",name:"my-account",component:()=>Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"8c2d"))},{path:"/admin",name:"admin",component:()=>Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"34ab"))},{path:"/welcome",name:"welcome",component:()=>Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"35a8"))}]}];G.push({path:"*",component:()=>Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"e51e"))});var K=G,X=Object(I["route"])((function({Vue:e}){e.use(Q["a"]);const t=new Q["a"]({scrollBehavior:()=>({x:0,y:0}),routes:K,mode:"hash",base:"/juju-lens/"});return t.beforeEach((e,t,n)=>{const o="seen-juju-lens-before";if(m["a"].getItem(o)||"welcome"==e.name)n();else{n({name:"welcome",query:Object.assign({welcomePageTo:e.fullPath},e.query)});try{m["a"].set(o,"true")}catch(r){console.error(r)}}}),t})),Y=function(){return Z.apply(this,arguments)};function Z(){return Z=l()(r.a.mark((function e(){var t,n,o;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof N){e.next=6;break}return e.next=3,N({Vue:i["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=N;case 7:if(t=e.t0,"function"!==typeof X){e.next=14;break}return e.next=11,X({Vue:i["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=X;case 15:return n=e.t1,t.$router=n,o={router:n,store:t,render:function(e){return e(O)}},o.el="#q-app",e.abrupt("return",{app:o,store:t,router:n});case 20:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}var ee=n("bc3a"),te=n.n(ee),ne=Object(I["boot"])(({Vue:e})=>{e.prototype.$axios=te.a});function oe(){return re.apply(this,arguments)}function re(){return re=l()(r.a.mark((function e(){var t,n,o,a,l,c,s,u,d;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:t=e.sent,n=t.app,o=t.store,a=t.router,l=!0,c=function(e){l=!1,window.location.href=e},s=window.location.href.replace(window.location.origin,""),u=[ne],d=0;case 11:if(!(!0===l&&d<u.length)){e.next=29;break}if("function"===typeof u[d]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,u[d]({app:n,router:a,store:o,Vue:i["a"],ssrContext:null,redirect:c,urlPath:s});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:d++,e.next=11;break;case 29:if(!1!==l){e.next=31;break}return e.abrupt("return");case 31:new i["a"](n);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),re.apply(this,arguments)}oe()},6260:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("2b0e"),r=n("b444"),a=n("f319"),l=n("1732");const i={addFloatingWindow:"addFloatingWindow",removeFloatingWindow:"removeFloatingWindow"},c={[i.addFloatingWindow](e,{unit:t,app:n,kind:i}){const c=Object(l["a"])(),s={id:c,unit:t,app:n,visible:!1,maximized:!1,zIndex:0,kind:r["a"][i]};return e.commit(a["b"].addFloatingWindow,s),o["a"].nextTick(()=>{e.commit(a["b"].toggleFloatingWindowVisible,s.id)}),c},[i.removeFloatingWindow](e,t){e.commit(a["b"].hideFloatingWindow,t),o["a"].nextTick(()=>{setTimeout(()=>{e.commit(a["b"].removeFloatingWindow,t)},400)})}};t["b"]=c},"7e6d":function(e,t,n){},aaf8:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return b}));var o=n("fb60");function r(e,t,n){return e+"/"+t+"/"+n}const a={icon:"fas fa-check-circle",color:"var(--q-color-positive)"},l={icon:"fas fa-exclamation-triangle",color:"var(--q-color-warning)"},i={icon:"fas fa-exclamation-circle",color:"var(--q-color-negative)"},c={icon:"fas fa-circle",color:"var(--q-color-positive)"},s={icon:"fas fa-circle",color:"var(--q-color-warning)"},u={icon:"fas fa-circle",color:"var(--q-color-negative)"};function d(e,t){const n=o["a"][e];return n>=o["a"].blocked?t?u:i:n>=o["a"].maintenance?t?s:l:t?c:a}function m(e){return Object.assign({statusIcon:d(e["workload-status"].current,!0)},e)}function f(e){return e.replace("cs:","https://api.jujucharms.com/charmstore/v5/")+"/icon.svg"}function p(e,t){const n=e.applications[t];let r=[];for(const l in e.units){const t=e.units[l];t.name.startsWith(n.name)&&r.push(m(t)),r=r.sort((e,t)=>o["a"][t["workload-status"].current]-o["a"][e["workload-status"].current])}const a=r.map(e=>e["workload-status"].current)[0];return Object.assign({charmIconUrl:f(n["charm-url"]),units:r,statusIcon:d(a),statusSeverity:a||"active"},n)}function b(e,t){const n=e.models[t];let r=[];for(const l in e.applications){const t=e.applications[l];t["model-uuid"]==n["model-uuid"]&&r.push(p(e,l)),r=r.sort((e,t)=>o["a"][t.statusSeverity]-o["a"][e.statusSeverity])}const a=r.map(e=>e.statusSeverity)[0];return Object.assign({statusSeverity:a||"active",statusIcon:d(a),applications:r},n)}},b2da:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("cf2e"),r=n("18d6"),a=n("3b3d"),l=n.n(a);const i={loadControllers:"loadControllers",setCurrentController:"setCurrentController",updateController:"updateController",deleteController:"deleteController",establishControllerConn:"establishControllerConn"},c="jujuState";function s(e){const t={};for(const o in e.controllers)t[o]={applications:{},charms:{},machines:{},models:{},units:{},username:e.controllers[o].username,password:e.controllers[o].password,host:e.controllers[o].host,port:e.controllers[o].port};const n={currentController:e.currentController,controllers:t};r["a"].set(c,n)}const u={[i.setCurrentController](e,t){e.commit(o["b"].setCurrentController,t),s(e.state)},[i.loadControllers](e){const t=r["a"].getItem(c);if(t){e.commit(o["b"].setCurrentController,t.currentController);for(const n in t.controllers)e.dispatch(i.updateController,{name:n,controller:t.controllers[n]})}},[i.updateController](e,{name:t,controller:n}){const r=e.state.controllers[t];r&&r.controllerWatchHandle&&r.controllerWatchHandle.stop(e=>{e&&console.error(e)}),e.commit(o["b"].updateController,{name:t,controller:n}),s(e.state),n.conn||n.controllerWatchHandle||e.dispatch(i.establishControllerConn,t)},[i.establishControllerConn](e,t){const r=e.state.controllers[t];if(!r)return;const a=[n("9927"),n("24f0")],c={debug:!1,facades:a,wsclass:WebSocket};l.a.connectAndLogin(`wss://${r.host}:${r.port}/api`,{user:"admin"==r.username?"user-admin":r.username,password:r.password},c,(n,a)=>{if(n)return console.error(n),void setTimeout(()=>{e.dispatch(i.establishControllerConn,t)},1e3);const l=a.conn.facades.controller,c=l.watch((n,r)=>{if(n)console.log(n);else for(const a of r.deltas)e.commit(o["b"].updateControllerData,{name:t,data:a})});r.conn=l,r.controllerWatchHandle=c,e.commit(o["b"].updateController,{name:t,controller:r})})},[i.deleteController](e,t){const n=e.state.controllers[t];console.log,n&&n.conn&&n.controllerWatchHandle&&n.controllerWatchHandle.stop(e=>{e&&console.error(e)}),e.commit(o["b"].deleteController,t),s(e.state)}};t["b"]=u},b444:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e[e["log"]=0]="log",e[e["terminal"]=1]="terminal"}(o||(o={}));const r={debugWindow:{visible:!1,maximized:!1},floatingWindows:[]};t["b"]=r},cf2e:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var o=n("2b0e"),r=n("aaf8");const a={setCurrentController:"setCurrentController",setControllers:"setControllers",updateController:"updateController",deleteController:"deleteController",updateControllerData:"updateControllerData"},l={[a.setCurrentController](e,t){e.currentController=t},[a.setControllers](e,t){e.controllers=t},[a.updateController](e,{name:t,controller:n}){o["a"].set(e.controllers,t,n)},[a.deleteController](e,t){o["a"].delete(e.controllers,t),e.currentController==t&&(e.currentController="All")},[a.updateControllerData](e,{name:t,data:[n,a,l]}){if("model"==n){const n=l,i=Object(r["b"])(t,n["model-uuid"],n.name);"change"==a?o["a"].set(e.controllers[t].models,i,Object.assign({lensId:i},n)):"remove"==a&&o["a"].delete(e.controllers[t].models,i)}else if("application"==n){const n=l,i=Object(r["b"])(t,n["model-uuid"],n.name);"change"==a?o["a"].set(e.controllers[t].applications,i,Object.assign({lensId:i},n)):"remove"==a&&o["a"].delete(e.controllers[t].applications,i)}else if("unit"==n){const n=l,i=Object(r["b"])(t,n["model-uuid"],n.name);"change"==a?o["a"].set(e.controllers[t].units,i,Object.assign({lensId:i},n)):"remove"==a&&o["a"].delete(e.controllers[t].units,i)}else if("machine"==n){const n=l,i=Object(r["b"])(t,n["model-uuid"],n.id);"change"==a?o["a"].set(e.controllers[t].machines,i,Object.assign({lensId:i},n)):"remove"==a&&o["a"].delete(e.controllers[t].machines,i)}else if("charm"==n){const n=l,i=Object(r["b"])(t,n["model-uuid"],n["charm-url"]);"change"==a?o["a"].set(e.controllers[t].charms,i,Object.assign({lensId:i},n)):"remove"==a&&o["a"].delete(e.controllers[t].charms,i)}else console.warn("Unidentified resource type from Juju controller changefeed: "+n)}};t["a"]=l},f319:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));const o={addFloatingWindow:"addFloatingWindow",toggleFloatingWindowMaximized:"toggleFloatingWindowMaximized",toggleFloatingWindowVisible:"toggleFloatingWindowVisible",hideFloatingWindow:"hideFloatingWindow",focusFloatingWindow:"focusFloatingWindow",removeFloatingWindow:"removeFloatingWindow"};function r(e,t){e.floatingWindows.map(e=>{e.id==t?e.zIndex=1:e.zIndex=0})}const a={toggleDebugWindow(e){e.debugWindow.visible=!e.debugWindow.visible},toggleDebugWindowMaximized(e){e.debugWindow.maximized=!e.debugWindow.maximized},[o.addFloatingWindow](e,t){e.floatingWindows.push(t)},[o.toggleFloatingWindowMaximized](e,t){e.floatingWindows.map(e=>{e.id==t&&(e.maximized=!e.maximized)})},[o.toggleFloatingWindowVisible](e,t){let n=!1;e.floatingWindows.map(e=>{e.id==t&&(e.visible=!e.visible,n=e.visible)}),n&&r(e,t)},[o.hideFloatingWindow](e,t){e.floatingWindows.map(e=>{e.id==t&&(e.visible=!1)})},[o.focusFloatingWindow](e,t){r(e,t)},[o.removeFloatingWindow](e,t){e.floatingWindows=e.floatingWindows.filter(e=>e.id!=t)}};t["a"]=a},fb60:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e[e["active"]=0]="active",e[e["started"]=1]="started",e[e["maintenance"]=2]="maintenance",e[e["unknown"]=3]="unknown",e[e["waiting"]=4]="waiting",e[e["blocked"]=5]="blocked",e[e["error"]=6]="error",e[e["terminated"]=7]="terminated"}(o||(o={}));const r={currentController:"All",controllers:{}};t["b"]=r}},[[0,2,0]]]);