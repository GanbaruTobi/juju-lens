(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"29db":function(t,e,o){},"56c6":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"models absolute fit flex items-stretch",staticStyle:{overflow:"hidden"}},[o("div",{staticClass:"fit column"},[o("q-toolbar",{staticClass:"col-auto row items-center"},[o("q-tabs",{staticClass:"model-machine-tabs q-pa-xs",attrs:{"inline-label":"",shrink:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("q-route-tab",{attrs:{label:"Applications",icon:"share",name:"applications",to:{name:"models"}}}),o("q-route-tab",{attrs:{label:"Machines",icon:"fas fa-server",name:"machines",to:{name:"machines"}}})],1),o("q-space"),o("div",{staticStyle:{flex:"0.1 0.5 10em"},attrs:{id:"sort-models-select"}},[o("q-select",{staticClass:"on-left",attrs:{dense:"",label:"Sort By",options:t.sortModelsByOptions,color:t.$q.dark.isActive?"secondary":"primary",filled:""},model:{value:t.sortModelsBy,callback:function(e){t.sortModelsBy=e},expression:"sortModelsBy"}})],1),o("q-btn",{attrs:{color:"positive",icon:"fas fa-plus"},on:{click:function(e){return t.startCreate()}}})],1),o("div",{staticClass:"col-grow column relative-position"},[o("q-resize-observer",{on:{resize:t.onResizeContent}}),o("q-scroll-area",{ref:"modelScrollArea",staticClass:"col-grow",attrs:{"thumb-style":{width:"5px"}}},[o("div",{staticClass:"q-pa-sm"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-grow text-h5 q-mb-md xs"},[t._v("\n              "+t._s("applications"==t.tab?"Applications":"Machines")+"\n            ")]),o("div",{staticStyle:{flex:"0.1 0.5 10em",position:"relative",top:"-0.5em"},attrs:{id:"sort-models-select-mobile"}},[o("q-select",{staticClass:"on-left",attrs:{dense:"",label:"Sort By",options:t.sortModelsByOptions,color:t.$q.dark.isActive?"secondary":"primary",filled:""},model:{value:t.sortModelsBy,callback:function(e){t.sortModelsBy=e},expression:"sortModelsBy"}})],1)]),o("transition-group",{attrs:{name:"model-group-trans",tag:"div"}},t._l(t.models,(function(e){return o("div",{key:e.id,staticClass:"q-mb-md full-width"},[o("q-toolbar",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-primary text-white full-width",on:{click:function(o){return t.$set(t.modelsExpanded,e.id,!t.modelsExpanded[e.id])}}},[o("q-icon",{style:{color:e.statusIcon.color},attrs:{name:e.statusIcon.icon,size:"1.7em"}}),o("q-separator",{staticClass:"on-right",attrs:{vertical:""}}),o("q-toolbar-title",{staticStyle:{flex:"1 1 0%"}},[o("span",[t._v("\n                    "+t._s(e.name)+"\n                    "),o("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle"}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])],1)]),o("div",{staticClass:"avatar-stack"},t._l(e.applications,(function(e){return o("q-avatar",{key:e.id,attrs:{size:"2em"}},[o("q-img",{attrs:{src:e.charm.imageUrl}}),o("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle","content-style":"font-size: 0.8em;"}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])],1)})),1),o("q-btn",{staticStyle:{transition:"transform 0.2s"},style:{transform:t.modelsExpanded[e.id]?"rotateZ(180deg)":"none"},attrs:{round:"",dense:"",flat:"",icon:"arrow_downward"}}),o("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"more_vert"},on:{click:function(t){t.stopPropagation()}}})],1),o("q-slide-transition",[t.modelsExpanded[e.id]?o("div",[o("q-tab-panels",{staticStyle:{"background-color":"hsla(0, 0%, 0%, 0)"},attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("q-tab-panel",{staticClass:"q-pa-none",staticStyle:{overflow:"hidden"},attrs:{id:"model-"+e.id,name:"applications"}},[o("q-list",{attrs:{bordered:"",separator:""}},t._l(e.applications,(function(e){return o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticClass:"row",attrs:{clickable:"",id:"application-"+e.id},on:{click:function(o){t.activeApplication=e,t.showFooter()}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{style:{color:e.statusIcon.color},attrs:{name:e.statusIcon.icon,size:"1.4em"}})],1),o("q-item-section",{attrs:{avatar:""}},[o("q-img",{staticStyle:{width:"2.5em"},attrs:{src:e.charm.imageUrl}})],1),o("q-item-section",[o("div",[t._v("\n                              "+t._s(e.name)+"\n                            ")]),o("div",{staticClass:"row reverse"},t._l(e.units,(function(e){return o("div",{key:e.id},[o("q-icon",{staticClass:"q-ma-xs",style:{color:e.statusIcon.color},attrs:{name:e.statusIcon.icon,size:"1.em"}}),o("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle","content-style":"font-size: 0.8rem;"}},[t._v("\n                                  "+t._s(e.status.message||"status: "+e.status.severity)+"\n                                ")])],1)})),0)]),o("q-item-section",{attrs:{side:""}},[o("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"more_vert"},on:{click:function(t){t.stopPropagation()}}})],1)],1)})),1)],1),o("q-tab-panel",{attrs:{name:"machines"}},[o("div",{staticClass:"text-h5"},[t._v("Machine List Comming Soon!")])])],1)],1):t._e()])],1)})),0)],1)]),"applications"==t.tab?o("div",{staticClass:"bg-dark text-white relative-position",staticStyle:{overflow:"hidden"},style:{height:t.footerVisible?t.footerHeight+"%":"0%",transition:t.footerTransitioning?"all "+t.footerTransitionDuration/1e3+"s":"unset"}},[t.activeApplication&&(t.footerVisible||t.footerTransitioning)?o("div",[o("div",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse.up.down.prevent",value:t.resizeFooter,expression:"resizeFooter",modifiers:{mouse:!0,up:!0,down:!0,prevent:!0}}],staticStyle:{position:"absolute",left:"0",right:"0",top:"0",cursor:"ns-resize",height:"0.7em"}}),o("q-bar",{attrs:{dense:""}},[o("img",{staticStyle:{height:"1em"},attrs:{src:t.activeApplication.charm.imageUrl,ratio:1}}),o("div",{staticClass:"text-weight-bold ellipsis"},[t._v("\n              "+t._s(t.activeApplication.name)+"\n            ")]),o("q-space"),o("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{dense:"",flat:"",icon:"fas fa-window-minimize"},on:{click:function(e){return t.hideFooter()}}},[o("q-tooltip",{attrs:{"transition-show":"jump-up","transition-hide":"jump-down",anchor:"top middle",self:"bottom middle",delay:300}},[t._v("\n                Hide\n              ")])],1)],1)],1):t._e()]):t._e()],1)],1),o("juju-loading",{attrs:{loading:t.loading}})],1)},a=[],s=o("b7b1"),n=o("fb60");const r={icon:"fas fa-check-circle",color:"var(--q-color-positive)"},l={icon:"fas fa-exclamation-triangle",color:"var(--q-color-warning)"},c={icon:"fas fa-exclamation-circle",color:"var(--q-color-negative)"},d={icon:"fas fa-circle",color:"var(--q-color-positive)"},p={icon:"fas fa-circle",color:"var(--q-color-warning)"},u={icon:"fas fa-circle",color:"var(--q-color-negative)"};function m(t,e){const o=n["a"][t];return o>=n["a"].blocked?e?u:c:o>=n["a"].maintenance?e?p:l:e?d:r}var h=o("b2da"),f=o("60a3"),v=o("4bb5"),b=o("0831"),g=o("f303"),y=o("18d6"),q=function(t,e,o,i){var a,s=arguments.length,n=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s<3?a(n):s>3?a(e,o,n):a(e,o))||n);return s>3&&n&&Object.defineProperty(e,o,n),n},w=function(t,e,o,i){function a(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,s){function n(t){try{l(i.next(t))}catch(e){s(e)}}function r(t){try{l(i["throw"](t))}catch(e){s(e)}}function l(t){t.done?o(t.value):a(t.value).then(n,r)}l((i=i.apply(t,e||[])).next())}))};const S=Object(v["a"])("juju"),{offset:T}=g["c"],{setScrollPosition:x}=b["a"],C="sortModelsBy";let _=class extends f["d"]{constructor(){super(...arguments),this.loading=!1,this.sortModelsByOptions=["Status","Name"],this.sortModelsBy="Status",this.tab="applications",this.modelsExpanded={},this.activeApplication=null,this.pageHeight=0,this.footerVisible=!1,this.footerHeight=50,this.footerTransitioning=!1,this.footerTransitionDuration=300}onResizeContent({height:t}){this.pageHeight=t}resizeFooter(t){const e=t.delta.y,o=e/this.pageHeight*100,i=this.footerHeight-o;i>100?this.footerHeight=100:i<2?(this.footerVisible=!1,this.footerHeight=50):this.footerHeight=i}hideFooter(){this.footerTransitioning=!0,this.footerVisible=!1,setTimeout(()=>this.footerTransitioning=!1,this.footerTransitionDuration)}showFooter(){this.footerTransitioning=!0,this.footerVisible=!0,setTimeout(()=>this.footerTransitioning=!1,this.footerTransitionDuration)}onSortModelsByChange(t){y["a"].set(C,t)}scrollToElement(t){const e=this.$refs.modelScrollArea,o=e.getScrollTarget(),i=e.getScrollPosition(),a=T(t).top,s=i+a-122,n=100;x(o,s,n)}get models(){const t=[];for(const e of this.controllerModels){const o=this.applications.filter(t=>t.modelId==e.id).map(t=>{const e=this.units.filter(e=>e.applicationId==t.id).map(t=>Object.assign({statusIcon:m(t.status.severity,!0)},t)),o=e.map(t=>t.status.severity).sort((t,e)=>n["a"][e]-n["a"][t])[0];return Object.assign({charm:this.charmStore.filter(e=>e.id==t.charmId)[0],units:e,statusIcon:m(o),statusSeverity:o},t)}),i=o.map(t=>t.statusSeverity).sort((t,e)=>n["a"][e]-n["a"][t])[0];t.push(Object.assign({applications:o,statusIcon:m(i),statusSeverity:i},e))}return t.sort((t,e)=>"Status"==this.sortModelsBy?n["a"][e.statusSeverity]-n["a"][t.statusSeverity]:t.name>e.name?1:-1)}created(){return w(this,void 0,void 0,(function*(){const t=y["a"].getItem(C);!t||"Status"!=t&&"Name"!=t||(this.sortModelsBy=t),yield this.fetchData(),this.scrollToApp()}))}fetchData(){return w(this,void 0,void 0,(function*(){this.loading=!0,yield this.loadAllState(),this.loading=!1}))}scrollToApp(){const t=this.$route.query.unitId;if(!t)return;const e=this.units.filter(e=>e.id==t)[0],o=this.applications.filter(t=>t.id==e.applicationId)[0];this.$set(this.modelsExpanded,o.modelId,!0),setTimeout(function t(){const e=document.getElementById("application-"+o.id);e?this.scrollToElement(e):setTimeout(t,100)}.bind(this),200)}};q([S.State],_.prototype,"currentController",void 0),q([S.Getter],_.prototype,"controllerModels",void 0),q([S.State("store")],_.prototype,"charmStore",void 0),q([S.State],_.prototype,"applications",void 0),q([S.State],_.prototype,"units",void 0),q([S.Action(h["a"].loadAllState)],_.prototype,"loadAllState",void 0),q([Object(f["e"])("sortModelsBy")],_.prototype,"onSortModelsByChange",null),q([Object(f["e"])("$route")],_.prototype,"scrollToApp",null),_=q([Object(f["a"])({components:{JujuLoading:s["a"]}})],_);var j=_,k=j,Q=(o("ca6e"),o("2877")),I=o("65c6"),O=o("429b"),B=o("7867"),A=o("2c91"),M=o("ddd8"),z=o("9c40"),L=o("3980"),H=o("4983"),R=o("0016"),P=o("eb85"),E=o("6ac5"),$=o("05c0"),D=o("cb32"),F=o("068f"),N=o("e9c1"),V=o("adad"),J=o("823b"),U=o("1c1c"),G=o("66e5"),Z=o("4074"),K=o("d847"),W=o("7460"),X=o("714f"),Y=o("75c3"),tt=o("eebe"),et=o.n(tt),ot=Object(Q["a"])(k,i,a,!1,null,null,null);e["default"]=ot.exports;et()(ot,"components",{QToolbar:I["a"],QTabs:O["a"],QRouteTab:B["a"],QSpace:A["a"],QSelect:M["a"],QBtn:z["a"],QResizeObserver:L["a"],QScrollArea:H["a"],QIcon:R["a"],QSeparator:P["a"],QToolbarTitle:E["a"],QTooltip:$["a"],QAvatar:D["a"],QImg:F["a"],QSlideTransition:N["a"],QTabPanels:V["a"],QTabPanel:J["a"],QList:U["a"],QItem:G["a"],QItemSection:Z["a"],QBar:K["a"],QTab:W["a"]}),et()(ot,"directives",{Ripple:X["a"],TouchPan:Y["a"]})},b7b1:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-inner-loading",{attrs:{showing:t.showLoading}},[o("q-spinner-rings",{attrs:{size:"80%",color:t.$q.dark.isActive?"secondary":"primary"}})],1)},a=[],s=o("74f7"),n=o("792f"),r=o("60a3"),l=function(t,e,o,i){var a,s=arguments.length,n=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s<3?a(n):s>3?a(e,o,n):a(e,o))||n);return s>3&&n&&Object.defineProperty(e,o,n),n};let c=class extends r["d"]{constructor(){super(...arguments),this.showLoading=!1,this.showLoadingTimeoutHandle=null}created(){this.onLoadingChange(this.loading)}onLoadingChange(t){t||(this.showLoading=!1),!t&&this.showLoadingTimeoutHandle?clearTimeout(this.showLoadingTimeoutHandle):t&&!this.showLoadingTimeoutHandle&&(this.showLoadingTimeoutHandle=setTimeout(()=>this.showLoading=!0,this.delay))}};l([Object(r["c"])(Boolean)],c.prototype,"loading",void 0),l([Object(r["c"])({type:Number,default:300})],c.prototype,"delay",void 0),l([Object(r["e"])("loading")],c.prototype,"onLoadingChange",null),c=l([Object(r["a"])({components:{QInnerLoading:s["a"],QSpinnerRings:n["a"]}})],c);var d=c,p=d,u=o("2877"),m=o("eebe"),h=o.n(m),f=Object(u["a"])(p,i,a,!1,null,null,null);e["a"]=f.exports;h()(f,"components",{QInnerLoading:s["a"],QSpinnerRings:n["a"]})},ca6e:function(t,e,o){"use strict";var i=o("29db"),a=o.n(i);a.a}}]);